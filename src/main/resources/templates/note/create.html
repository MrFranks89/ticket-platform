<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Dettaglio Ticket - Note</title>
	<div th:replace="~{fragments :: head}"></div>

</head>

<body>
	<nav th:replace="~{navbar :: navbar('note')}"> </nav>
	<div class="container my-5">
		<!-- Titolo e dettagli del ticket -->
		<div class="mb-4">
			<h1>Dettaglio Ticket</h1>
			<p><strong>Titolo:</strong> <span th:text="${ticket.titolo}">Titolo del Ticket</span></p>
			<p><strong>Descrizione:</strong> <span th:text="${ticket.descrizione}">Descrizione del Ticket</span></p>
			<p><strong>Stato:</strong> <span th:text="${ticket.stato}">Stato del Ticket</span></p>
			<p><strong>Operatore:</strong> <span th:text="${ticket.operatore.username}">Nome Operatore</span></p>
		</div>


		<div class="card">
			<div class="card-header">
				<h2>Note del Ticket</h2>
			</div>
			<div class="card-body">

				<div class="list-group mb-4">
					<div th:each="nota : ${ticket.note}" class="list-group-item">
						<div class="d-flex justify-content-between align-items-center">
							<h5 th:text="${nota.autore}">Autore Nota</h5>
							<small th:text="${nota.dataCreazione}">

							</small>
						</div>
						<p th:text="${nota.testo}" class="mb-0">Testo della nota...</p>
					</div>
				</div>


				<form th:action="@{/tickets/{id}/note/add(id=${ticket.id})}" method="post">
				   <div class="mb-3">
				       <label for="notaTesto" class="form-label">Aggiungi una nuova nota:</label>
				       <textarea class="form-control" id="notaTesto" name="testo" rows="3" placeholder="Scrivi qui la tua nota..." required></textarea>
				   </div>
				   <button type="submit" class="btn btn-secondary">Aggiungi Nota</button>
				</form>
			</div>
		</div>


		<div class="mt-3">
			<a th:href="@{/tickets/{id}(id=${ticket.id})}" class="btn btn-secondary">Torna al Dettaglio Ticket</a>
		</div>
	</div>

	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>

</html>